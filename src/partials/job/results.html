<div ng-if="junit_files.length == 0">
  No JUnit result uploaded.
</div>
<div ng-repeat="file in junit_files | orderBy:'name'">
  <div class="row">
    <div class="col-xs-12">
      <h2 class="page-header">
        {{ file.name || 'Test'}}
        <small>
          (Duration: {{ file.time | msToSec }} sec)
          <span class="label label-primary">{{file.total}} tests</span>
          <span class="label label-success" ng-if="file.success">{{file.success}} success</span>
          <span class="label label-warning" ng-if="file.skips">{{file.skips}} skipped</span>
          <span class="label label-default" ng-if="file.errors">{{file.errors}} errors</span>
          <span class="label label-danger" ng-if="file.failures">{{file.failures}} failures</span>
        </small>
        <button type="button" class="btn btn-default btn-xs pull-right" ng-click="file.collapse = !file.collapse">
        <span ng-if="file.collapse">
          <i class="glyphicon glyphicon-menu-down"></i>
          see details
        </span>
          <span ng-if="!file.collapse">
          <i class="glyphicon glyphicon-menu-up"></i>
          close details
        </span>
        </button>
      </h2>
    </div>
  </div>
  <div ng-controller="fileJunitStatusController" uib-collapse="file.collapse">
    <div class="row" ng-hide="file.total === file.success">
      <div class="col-xs-12 mb-3">
        Filter:
        <label class="checkbox-inline" ng-if="file.success">
          <input type="checkbox" ng-change="filterjunit()" ng-model="input.passed"/>
          <span class="label label-success">Passed</span>
        </label>
        <label class="checkbox-inline" ng-if="file.skips">
          <input type="checkbox" ng-change="filterjunit()" ng-model="input.skipped"/>
          <span class="label label-warning">Skipped</span>
        </label>
        <label class="checkbox-inline" ng-if="file.errors">
          <input type="checkbox" ng-change="filterjunit()" ng-model="input.error"/>
          <span class="label label-default">Error</span>
        </label>
        <label class="checkbox-inline" ng-if="file.failures">
          <input type="checkbox" ng-change="filterjunit()" ng-model="input.failure"/>
          <span class="label label-danger">Failure</span>
        </label>
      </div>
    </div>
    <div class="row">
      <div class="col-xs-12">
        <table class="table table-condensed table-bordered">
          <thead>
          <tr>
            <th>Status</th>
            <th>Classname</th>
            <th>Name</th>
            <th class="text-right">Time</th>
          </tr>
          </thead>
          <tbody>
          <tr ng-repeat-start="testcase in bucket"
              ng-click="testcase.opened = !testcase.opened"
              ng-class="{'warning':testcase.action == 'skipped', 'danger':testcase.action == 'failure' || testcase.action == 'error' }">
            <td>
              <span ng-if="testcase.action == 'skipped'" class="label label-warning">Skip</span>
              <span ng-if="testcase.action == 'failure'" class="label label-danger">Failure</span>
              <span ng-if="testcase.action == 'error'" class="label label-default">Error</span>
              <span ng-if="testcase.action == 'passed'" class="label label-success">Pass</span>
            </td>
            <td>{{testcase.classname || testcase.name}}</td>
            <td>{{testcase.name}}</td>
            <td class="text-right">{{testcase.time}} ms</td>
          </tr>
          <tr ng-repeat-end
              ng-show="testcase.opened"
              ng-if="testcase.type || testcase.message || testcase.value"
              ng-class="{'warning':testcase.action == 'skipped', 'danger':testcase.action == 'failure' || testcase.action == 'error' }">
            <td colspan=4>
              <b>Type:</b> {{ testcase.type}} <br>
              <b>Message:</b> {{ testcase.message}} <br>
              <b>Value:</b>
              <pre>{{ testcase.value}}</pre>
            </td>
          </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
